<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Backend architecture - K.S.C.H. Workflows Architecture</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../../overview/index.html">Overview</a></li><li class="chapter-item "><a href="../../../01_introduction-and-goals/index.html"><strong aria-hidden="true">1.</strong> Introduction and Goals</a></li><li class="chapter-item "><a href="../../../02_constraints/index.html"><strong aria-hidden="true">2.</strong> Constraints</a></li><li class="chapter-item "><a href="../../../03_context-and-scope/index.html"><strong aria-hidden="true">3.</strong> Context and Scope</a></li><li class="chapter-item "><a href="../../../04_solution-strategy/index.html"><strong aria-hidden="true">4.</strong> Solution Strategy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../04_solution-strategy/ddd/index.html"><strong aria-hidden="true">4.1.</strong> Domain Driven Design</a></li><li class="chapter-item "><a href="../../../04_solution-strategy/openapi/index.html"><strong aria-hidden="true">4.2.</strong> OpenAPI</a></li></ol></li><li class="chapter-item "><a href="../../../05_building-block-view/index.html"><strong aria-hidden="true">5.</strong> Building Block View</a></li><li class="chapter-item "><a href="../../../06_runtime-view/index.html"><strong aria-hidden="true">6.</strong> Runtime View</a></li><li class="chapter-item "><a href="../../../07_deployment-view/index.html"><strong aria-hidden="true">7.</strong> Deployment View </a></li><li class="chapter-item "><a href="../../../08_crosscutting-concepts/index.html"><strong aria-hidden="true">8.</strong> Crosscutting Concepts</a></li><li class="chapter-item expanded "><a href="../../../09_architectural-decisions/index.html"><strong aria-hidden="true">9.</strong> Architectural Decisions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../09_architectural-decisions/2021/index.html"><strong aria-hidden="true">9.1.</strong> 2021</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../09_architectural-decisions/2021/backend-architecture/index.html" class="active"><strong aria-hidden="true">9.1.1.</strong> Backend architecture</a></li><li class="chapter-item "><a href="../../../09_architectural-decisions/2021/java-vs-kotlin/index.html"><strong aria-hidden="true">9.1.2.</strong> Java vs. Kotlin</a></li><li class="chapter-item "><a href="../../../09_architectural-decisions/2021/backend-technoglogy/index.html"><strong aria-hidden="true">9.1.3.</strong> Backend technology</a></li><li class="chapter-item "><a href="../../../09_architectural-decisions/2021/frontend-technology/index.html"><strong aria-hidden="true">9.1.4.</strong> Frontend technology</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../10_quality-requirements/index.html"><strong aria-hidden="true">10.</strong> Quality Requirements</a></li><li class="chapter-item "><a href="../../../11_risks-and-technical-debt/index.html"><strong aria-hidden="true">11.</strong> Risks and Technical Debt</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../11_risks-and-technical-debt/ivory-tower/index.html"><strong aria-hidden="true">11.1.</strong> Ivory tower</a></li><li class="chapter-item "><a href="../../../11_risks-and-technical-debt/truck-factor/index.html"><strong aria-hidden="true">11.2.</strong> Truck factor</a></li><li class="chapter-item "><a href="../../../11_risks-and-technical-debt/laws-and-regulations/index.html"><strong aria-hidden="true">11.3.</strong> Laws and regulations</a></li></ol></li><li class="chapter-item "><a href="../../../12_glossary/index.html"><strong aria-hidden="true">12.</strong> Glossary</a></li><li class="chapter-item affix "><a href="../../../imprint/index.html">Imprint</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">K.S.C.H. Workflows Architecture</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ksch-workflows/architecture/issues" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ksch-workflows/architecture/issues/new?title&#x3D;[src/09_architectural-decisions/2021/backend-architecture/index.md]" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="java-application-architecture-style"><a class="header" href="#java-application-architecture-style">Java application architecture style</a></h1>
<h2 id="context"><a class="header" href="#context">Context</a></h2>
<p>There needs to be a concept for the module structure of the backend server.</p>
<h3 id="design-goals"><a class="header" href="#design-goals">Design goals</a></h3>
<ul>
<li>The business logic of the software needs to be very flexible, so that it can be adjusted to changing requirements of the KSCH.</li>
<li>The system needs to have good testability, so that there can be a very good test coverage for those business rules.</li>
<li>Enable hobby developer to contribute to the project in limited spare time. In order to achieve this, the congnitive load for working on a part of the system needs to be reduced to the minimum.</li>
<li>The system needs to be able to grow to support a wide range of functional requirements, so that it can potentially support all the IT based processes in the KSCH.</li>
</ul>
<h3 id="constraints"><a class="header" href="#constraints">Constraints</a></h3>
<ul>
<li>As programming language, Java should be used, since it will most likely be supported and have a large community over the next decade.</li>
<li>As application framework, Spring should be used, since it allows to make rather fast progress with a very small development team.</li>
<li>There will be only a single process running for the backend server, i.e. no microservice architecture. The reason for this to keep the operational complexity of the system at a level where the KSCH staff might operate the system independently.</li>
</ul>
<h2 id="alternatives"><a class="header" href="#alternatives">Alternatives</a></h2>
<h3 id="a-gradle-based-modules"><a class="header" href="#a-gradle-based-modules">(A) Gradle based modules</a></h3>
<p>The modules may be based on Gradle's multi-project builds.
Every module can have two nested modules: one for the API and one for the implementation.
If one module wants to use the API of another module, it will only be able to use the classes defined in the API submodule.</p>
<h4 id="pros"><a class="header" href="#pros">Pros</a></h4>
<ul>
<li>Gradle features take care to limit cross-module access on the intended API and to avoid cyclic dependencies between modules.</li>
<li>It is theoretically possible to automatically render module dependendency graphs by parsing the Gradle configuration.</li>
<li>The system design can be understood by referencing to the Gradle documentation which is good.</li>
<li>Once it Gradle parts are understood, it is fairly each to introduce new modules.</li>
</ul>
<h4 id="cons"><a class="header" href="#cons">Cons</a></h4>
<ul>
<li>In order to add new modulues, one needs to understand the Gradle project structure and then do a dozen of steps.</li>
<li>Gradle makes regular breaking changes, which leads to maintenance efforts.</li>
<li>There is no known example for a production system which was successful using this architecture.</li>
<li>It is not yet clear how to manage database migrations with this architecture style.</li>
</ul>
<h4 id="references"><a class="header" href="#references">References</a></h4>
<ul>
<li>https://github.com/ksch-workflows/ksch-workflows</li>
<li>https://docs.gradle.org/current/userguide/multi_project_builds.html</li>
<li>https://dev.to/janux_de/building-a-greenfield-hospital-information-system-with-java-spring-boot-apache-wicket-and-gradle-4np1</li>
<li>https://www.petrikainulainen.net/programming/gradle/getting-started-with-gradle-creating-a-multi-project-build/</li>
<li>https://www.tutorialspoint.com/gradle/gradle_multi_project_build.htm</li>
<li>https://spring.io/guides/gs/multi-module/</li>
</ul>
<h3 id="b-modulith"><a class="header" href="#b-modulith">(B) Modulith</a></h3>
<p>The Moduliths project is an experimental approach to achieve a good modularization for monolithic Spring applications by <a href="https://github.com/odrotbohm">Oliver Drotbohm</a>.</p>
<h4 id="pros-1"><a class="header" href="#pros-1">Pros</a></h4>
<ul>
<li>There is a low risk of the &quot;Architect's Ivory Tower&quot; where there is a &quot;Lack of Transparency&quot; of the system's architecture and a &quot;Lack of Understanding&quot; from the developers (see Knoernschild, p. 30 ff.).</li>
<li>The concept addresses many common architectural problems: cyclic dendencies, complexity, ...</li>
</ul>
<h4 id="cons-1"><a class="header" href="#cons-1">Cons</a></h4>
<ul>
<li>Learning efforts for Maven and ArcUnit.</li>
<li>Using this approach creates a depencency on a one-person project which might be abandoned at any time.</li>
<li>The README introduces the project as &quot;A playground to build technology supporting the development of modular monolithic (modulithic) Java applications.&quot; So it looks rather like an experimentation ground than an estabilished pattern for production systems.</li>
<li>It relies on conventions enforced by ArchUnit to provide access control. The api/implementation destincition from Gradle might make it clearer what is intended to be accessible or not.</li>
<li>It assumes that the whole application is living a in a single Java package. The modules are then defined as subpackages. This creation a weaker demarkation line for modules than Maven or Gradle sub-projects.</li>
</ul>
<h4 id="references-1"><a class="header" href="#references-1">References</a></h4>
<ul>
<li>https://github.com/odrotbohm/moduliths</li>
<li>https://www.youtube.com/results?search_query=modulith+drotbohm</li>
<li>https://github.com/st-tu-dresden/salespoint</li>
<li>Knoernschild: Java Application Architecture, Kirk Knoernschild</li>
</ul>
<h3 id="c-buckpal"><a class="header" href="#c-buckpal">(C) Buckpal</a></h3>
<p>The Buckpal project is a reference implementation of the clean architecture principles by <a href="https://github.com/thombergs">Tom Hombergs</a>.</p>
<h4 id="pros-2"><a class="header" href="#pros-2">Pros</a></h4>
<ul>
<li>Clear application structure based on the &quot;Hexagonal architecture&quot; design which may be considered as &quot;best practice&quot;.</li>
</ul>
<h4 id="cons-2"><a class="header" href="#cons-2">Cons</a></h4>
<ul>
<li>The example application is for a rather small domain. So it is not clear how this application style will scale for large domains.</li>
</ul>
<h4 id="references-2"><a class="header" href="#references-2">References</a></h4>
<ul>
<li>https://github.com/thombergs/buckpal</li>
<li>https://www.amazon.de/dp/B07YFS3DNF/ref=dp-kindle-redirect?_encoding=UTF8&amp;btkr=1</li>
</ul>
<h3 id="d-leasing-ninja"><a class="header" href="#d-leasing-ninja">(D) Leasing Ninja</a></h3>
<p>The Leasing Ninja project is a reference implementation of domain-driven design principles by <a href="https://github.com/hschwentner">Henning Schwentner</a>.</p>
<h4 id="pros-3"><a class="header" href="#pros-3">Pros</a></h4>
<ul>
<li>Clear separation of concerns</li>
<li>Clear modularization</li>
<li>Support for domain driven design principles</li>
</ul>
<h4 id="cons-3"><a class="header" href="#cons-3">Cons</a></h4>
<blockquote>
<p>Interesting advice about Java Module System by @joshbloch in Effective Java 3rd edition: &quot;It is too early to say whether modules will achieve widespread use outside of the JDK itself. In the meantime, it seems best to avoid them unless you have a compelling need.&quot; - <a href="https://twitter.com/lucianct2k2/status/1029669555055022080">twitter.com</a></p>
</blockquote>
<h4 id="references-3"><a class="header" href="#references-3">References</a></h4>
<ul>
<li>https://github.com/leasingninja/leasingninja-java-boundedcontexts-domainmodel</li>
<li>https://leasingninja.github.io/</li>
<li>https://blog.plan99.net/is-jigsaw-good-or-is-it-wack-ec634d36dd6f</li>
<li>https://trishagee.github.io/presentation/real_world_java_9/</li>
<li>https://developer.ibm.com/languages/java/tutorials/java-modularity-1/</li>
<li>Effective Java, Edition 3, Joshua Bloch, Item 15.</li>
<li>reasons for low adoption of JPMS - https://youtu.be/YYvc-DNuwr8?t=1272</li>
</ul>
<h3 id="e-osgi"><a class="header" href="#e-osgi">(E) OSGi</a></h3>
<h4 id="pros-4"><a class="header" href="#pros-4">Pros</a></h4>
<ul>
<li>Strong modularization support</li>
<li>Enables a plugin system</li>
</ul>
<h4 id="cons-4"><a class="header" href="#cons-4">Cons</a></h4>
<ul>
<li>No direct Spring support (see https://docs.spring.io/spring-osgi/)</li>
<li>Not all Java libraries cannot be used out of the box, but they need to be compiled specifically for OSGi.</li>
<li>High learning effort</li>
<li>It's rather a non-mainstream technologies which stands in the way for getting more developers for the system.</li>
</ul>
<h4 id="references-4"><a class="header" href="#references-4">References</a></h4>
<ul>
<li>https://en.wikipedia.org/wiki/OSGi</li>
</ul>
<h2 id="decision"><a class="header" href="#decision">Decision</a></h2>
<p>A combination of option A and option D seems most promising.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../09_architectural-decisions/2021/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../09_architectural-decisions/2021/java-vs-kotlin/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../09_architectural-decisions/2021/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../09_architectural-decisions/2021/java-vs-kotlin/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
